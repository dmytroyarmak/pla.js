import {solveLineraEquationByCholetsky} from '../../src/plalib-core';

describe('solveLineraEquationByCholetsky', function() {
  it('should be a function', function() {
    expect(solveLineraEquationByCholetsky).toEqual(jasmine.any(Function));
  });

  describe('for ax=b where a is a matrix nxn', function() {
    var n, a, b;

    beforeEach(function() {
      n = 9;
      a = [
        1, 0.5, 0.3333333333333333, 0.25, 0.2, 0.16666666666666666, 0.14285714285714285, 0.125, 0.1111111111111111,
        0.5, 1, 0.6666666666666666, 0.5, 0.4, 0.3333333333333333, 0.2857142857142857, 0.25, 0.2222222222222222,
        0.3333333333333333, 0.6666666666666666, 1, 0.75, 0.6, 0.5, 0.42857142857142855, 0.375, 0.3333333333333333,
        0.25, 0.5, 0.75, 1, 0.8, 0.6666666666666666, 0.5714285714285714, 0.5, 0.4444444444444444,
        0.2, 0.4, 0.6, 0.8, 1, 0.8333333333333334, 0.7142857142857143, 0.625, 0.5555555555555556,
        0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333334, 1, 0.8571428571428571, 0.75, 0.6666666666666666,
        0.14285714285714285, 0.2857142857142857, 0.42857142857142855, 0.5714285714285714, 0.7142857142857143, 0.8571428571428571, 1, 0.875, 0.7777777777777778,
        0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875, 1, 0.8888888888888888, 0.1111111111111111, 0.2222222222222222, 0.3333333333333333, 0.4444444444444444, 0.5555555555555556, 0.6666666666666666, 0.7777777777777778, 0.8888888888888888, 1
      ];

      b = [
        4,
        2,
        5,
        6,
        6,
        7,
        1,
        6,
        5
      ];

      solveLineraEquationByCholetsky(n, a, b);
    });

    it('should transform a to triangular form', function() {
      expect(a).toEqual([
        1, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 1, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 1, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 1, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 1, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 1, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 1
      ]);

      expect(b).toEqual([
        4.000000000000001,
        -4.400000000000005,
        2.742857142857156,
        2.476190476190456,
        -2.121212121212096,
        22.699300699300657,
        -37.97948717948712,
        23.278431372548976,
        -1.5882352941176325
      ]);
    });

  });
});
